"use strict";function PublishNewAdController(e,a,l,r,n,s,t,o){var i=this;i.adData={},e.fileSelected1=function(e){var a=e.files[0];if(a.type.match(/image\/.*/)){var r=new FileReader;r.onload=function(){$("#upload-image").html("<span></span><label class='md-button' md-ink-ripple for='image'><img src='"+r.result+"'></label><input id='image' type='file' onchange='angular.element(this).scope().fileSelected1(this)' />")},r.readAsDataURL(a);var t=a.name.indexOf("\\")>=0?a.name.lastIndexOf("\\"):a.name.lastIndexOf("/"),d=a.name.substring(t),u={method:"POST",url:s+"files/"+d,headers:n.headers,data:a};l(u).success(function(e){e.__type="File",i.adData.img1=e,o.showInfo("Снимката е качена!")}).error(function(e){o.showError("Има проблем със добавянето на снимката!",e)})}else $("#upload-image").html("<p>Опитваш се да качиш файл, различен от снимка!</p>")},i.publishAd=function(a){var n={method:"POST",url:s+"classes/Part",headers:r.headers,data:a};l(n).success(function(a){o.showInfo("Обявата е добавена успешно."),e.reloadAds()}).error(function(e){o.showError("Има проблем със добавянето на обявата!",e)})}}angular.module("app").controller("PublishNewAdController",PublishNewAdController);